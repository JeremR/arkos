# Maintainer: Jacob Cook <jacob@ark-os.org>
pkgname=arkos-confmon
pkgver=0.1
pkgrel=1
pkgdesc="Low-level configuration manager for arkOS Installer"
arch=('any')
url="https://ark-os.org"
license=('GPLv3')
depends=('python2' 'systemd' 'systemd-sysvcompat')

build() {
  wget "https://raw.github.com/cznweb/arkos-install/master/ConfMon/arkos-confmon.conf"
  wget "https://raw.github.com/cznweb/arkos-install/master/ConfMon/arkos-confmon.service"
  wget "https://raw.github.com/cznweb/arkos-install/master/ConfMon/confmon.py"
}

package() {
  install -D $srcdir/confmon.py $pkgdir/usr/bin/confmon.py
  install -D -m600 $srcdir/arkos-confmon.conf $pkgdir/boot/arkos-confmon.conf
  install -D $srcdir/arkos-confmon.service $pkgdir/usr/lib/systemd/system/arkos-confmon.service
  mkdir -p $pkgdir/etc/systemd/system/multi-user.target.wants
  ln -s /usr/lib/systemd/system/arkos-confmon.service $pkgdir/etc/systemd/system/multi-user.target.wants/arkos-confmon.service
}
